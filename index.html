<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Przekierowanie | Łukasz Guziczak</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap');

    :root {
      --primary-color: #0070f3;
      --primary-dark: #0050a0;
      --secondary-color: #34d399;
      --light-bg: #f9fafb;
      --dark-bg: #111827;
      --light-text: #1f2937;
      --dark-text: #f3f4f6;
      --light-card: #ffffff;
      --dark-card: #1f2937;
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      --heading-font: 'Poppins', 'Segoe UI', sans-serif;
      --body-font: 'Inter', 'Roboto', 'Arial', sans-serif;
    }
    
    /* Animation state classes */
    .redirect-floating {
      opacity: 1 !important;
      transform: translate(-50%, -50%) scale(1) !important;
      animation: float-redirect 4s ease-in-out infinite, wobble-shape 6s infinite linear !important;
    }
    
    .main-floating {
      animation: float-main-after 6s ease-in-out infinite, wobble-shape 6s infinite linear !important;
      transform: translate(-50%, -50%) scale(0.9) !important;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: var(--body-font);
      background-color: var(--light-bg);
      color: var(--light-text);
      height: 100vh;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      transition: var(--transition);
    }

    body.dark-mode {
      background-color: var(--dark-bg);
      color: var(--dark-text);
    }

    /* Background gradient */
    .bg-gradient {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at 70% 30%, rgba(0, 112, 243, 0.08) 0%, rgba(0, 0, 0, 0) 60%);
      z-index: -1;
      transition: var(--transition);
    }

    body.dark-mode .bg-gradient {
      background: radial-gradient(circle at 70% 30%, rgba(0, 112, 243, 0.15) 0%, rgba(0, 0, 0, 0) 70%);
    }
    
    /* Theme toggle button */
    .theme-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      background: none;
      border: none;
      cursor: pointer;
      width: 44px;
      height: 44px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--light-text);
      background-color: rgba(0, 0, 0, 0.05);
      z-index: 100;
      transition: var(--transition);
      backdrop-filter: blur(4px);
      border: 1px solid rgba(0, 0, 0, 0.05);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    
    body.dark-mode .theme-toggle {
      background-color: rgba(255, 255, 255, 0.1);
      color: var(--dark-text);
      border: 1px solid rgba(255, 255, 255, 0.05);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.25);
    }
    
    .theme-toggle:hover {
      background-color: rgba(0, 112, 243, 0.1);
      transform: translateY(-3px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
    }

    .theme-toggle:active {
      transform: translateY(-1px);
    }
    
    /* Bubble container */
    .bubble-container {
      position: relative;
      width: 300px;
      height: 300px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Base bubble styles */
    .bubble {
      position: absolute;
      background: rgba(0, 112, 243, 0.25);
      box-shadow: inset 0 0 20px rgba(255, 255, 255, 0.3),
                  0 0 15px rgba(0, 112, 243, 0.2);
      backdrop-filter: blur(5px);
      display: flex;
      align-items: center;
      justify-content: center;
      transform-origin: center;
      transition: box-shadow 0.3s ease;
      will-change: transform, border-radius;
      border-radius: 50% 50% 50% 50% / 50% 50% 50% 50%;
      overflow: hidden;
    }
    
    body.dark-mode .bubble {
      background: rgba(0, 112, 243, 0.3);
      box-shadow: inset 0 0 20px rgba(255, 255, 255, 0.15),
                  0 5px 15px rgba(0, 112, 243, 0.2);
    }
    
    /* Main bubble */
    .main-bubble {
      width: 140px;
      height: 140px;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      z-index: 3;
      animation: float-main 5s ease-in-out infinite, wobble-shape 6s infinite linear;
    }

    /* Redirect bubble - initially hidden */
    .redirect-bubble {
      width: 70px;
      height: 70px;
      left: calc(50% + 60px);
      top: calc(50% - 20px);
      opacity: 0;
      transform: translate(-50%, -50%) scale(0);
      cursor: pointer;
      z-index: 4;
      transition: var(--transition);
    }
    
    /* Highlights inside bubbles */
    .highlight {
      position: absolute;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.35);
      filter: blur(2px);
      opacity: 0.7;
      pointer-events: none;
    }
    
    body.dark-mode .highlight {
      background: rgba(255, 255, 255, 0.3);
      opacity: 0.65;
    }
    
    /* Main highlight */
    .highlight-main {
      width: 30%;
      height: 30%;
      top: 15%;
      left: 15%;
      border-radius: 70% 30% 50% 50% / 60% 40% 60% 40%;
      transform: rotate(-15deg);
      animation: pulse-highlight 8s infinite ease-in-out;
    }
    
    /* Secondary highlight */
    .highlight-small {
      width: 12%;
      height: 10%;
      top: 40%;
      left: 25%;
      border-radius: 40% 60% 55% 45% / 45% 55% 60% 40%;
      transform: rotate(25deg);
      animation: pulse-highlight 8s infinite ease-in-out reverse;
    }
    
    /* Spinner in main bubble */
    .spinner {
      width: 40px;
      height: 40px;
      border: 3px solid rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1.2s cubic-bezier(0.5, 0.1, 0.5, 1) infinite;
    }
    
    /* Arrow in redirect bubble */
    .arrow {
      position: relative;
      width: 20px;
      height: 20px;
      opacity: 0.9;
      transform: scale(0.8);
      transition: transform 0.3s ease;
    }
    
    .arrow::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border-top: 3px solid white;
      border-right: 3px solid white;
      transform: rotate(45deg);
    }

    .redirect-bubble:hover .arrow {
      transform: scale(1) translateX(2px);
    }
    
    /* Bubble connector (initially hidden) */
    .bubble-connector {
      position: absolute;
      z-index: 1;
      background: rgba(0, 112, 243, 0.12);
      box-shadow: inset 0 0 15px rgba(255, 255, 255, 0.5),
                  0 0 10px rgba(0, 112, 243, 0.1);
      backdrop-filter: blur(3px);
      opacity: 0;
      transform-origin: left center;
      left: 50%;
      top: 50%;
      width: 0;
      height: 0;
    }

    /* Tiny bubbles that appear during separation */
    .tiny-bubble {
      position: absolute;
      background: rgba(0, 112, 243, 0.15);
      border-radius: 50%;
      opacity: 0;
      box-shadow: inset 0 0 5px rgba(255, 255, 255, 0.6),
                  0 0 5px rgba(0, 112, 243, 0.15);
      z-index: 2;
      transform: scale(0);
      pointer-events: none;
    }
    
    /* Loading text */
    .loading-text {
      position: absolute;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      font-family: var(--heading-font);
      font-size: 0.9rem;
      color: var(--light-text);
      opacity: 0.8;
      text-align: center;
      transition: opacity 0.5s ease, transform 0.5s ease;
      padding: 8px 16px;
      border-radius: 20px;
      background-color: rgba(0, 112, 243, 0.1);
      backdrop-filter: blur(4px);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    
    body.dark-mode .loading-text {
      background-color: rgba(0, 112, 243, 0.15);
      color: var(--dark-text);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }

    .loading-text.fade-out {
      opacity: 0;
      transform: translateX(-50%) translateY(10px);
    }
    
    .loading-text.pulse {
      animation: text-pulse 2s infinite alternate ease-in-out;
    }
    
    /* Background particles */
    .particles-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      pointer-events: none;
    }
    
    .particle {
      position: absolute;
      background-color: var(--primary-color);
      border-radius: 50%;
      filter: blur(1px);
      opacity: 0.05;
      animation: float-particle 15s infinite ease-in-out;
    }
    
    body.dark-mode .particle {
      opacity: 0.07;
    }
    
    /* ANIMATIONS */
    
    /* Main bubble wobble */
    @keyframes wobble-shape {
      0% {
        border-radius: 51% 49% 48% 52% / 52% 47% 53% 48%;
      }
      16.67% {
        border-radius: 54% 46% 50% 50% / 45% 55% 49% 51%;
      }
      33.33% {
        border-radius: 49% 51% 55% 45% / 53% 47% 44% 56%;
      }
      50% {
        border-radius: 46% 54% 49% 51% / 48% 52% 56% 44%;
      }
      66.67% {
        border-radius: 52% 48% 43% 57% / 51% 49% 52% 48%;
      }
      83.33% {
        border-radius: 47% 53% 52% 48% / 49% 51% 46% 54%;
      }
      100% {
        border-radius: 51% 49% 48% 52% / 52% 47% 53% 48%;
      }
    }
    
    /* Main bubble floating */
    @keyframes float-main {
      0%, 100% {
        transform: translate(-50%, -50%) translateY(0);
      }
      25% {
        transform: translate(-52%, -48%) translateY(-5px);
      }
      50% {
        transform: translate(-50%, -52%) translateY(-10px);
      }
      75% {
        transform: translate(-48%, -50%) translateY(-5px);
      }
    }
    
    /* Spin animation for loader */
    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }
    
    /* Highlight pulsing */
    @keyframes pulse-highlight {
      0%, 100% {
        opacity: 0.65;
        transform: rotate(-15deg) scale(1);
      }
      50% {
        opacity: 0.85;
        transform: rotate(-12deg) scale(1.05);
      }
    }
    
    /* Text pulsing */
    @keyframes text-pulse {
      0% {
        transform: translateX(-50%) scale(1);
      }
      100% {
        transform: translateX(-50%) scale(1.05);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      }
    }
    
    /* Particles floating */
    @keyframes float-particle {
      0%, 100% {
        transform: translate(0, 0);
      }
      25% {
        transform: translate(var(--x-offset), var(--y-offset));
      }
      50% {
        transform: translate(calc(var(--x-offset) * 0.3), calc(var(--y-offset) * -0.8));
      }
      75% {
        transform: translate(calc(var(--x-offset) * -0.5), calc(var(--y-offset) * 0.3));
      }
    }
    
    /* Redirect bubble floating animation (after separation) */
    @keyframes float-redirect {
      0% {
        transform: translate(-50%, -50%) scale(1);
      }
      33% {
        transform: translate(-48%, -51%) scale(1) translateY(-5px);
      }
      66% {
        transform: translate(-52%, -49%) scale(1) translateY(-10px);
      }
      100% {
        transform: translate(-50%, -50%) scale(1);
      }
    }
    
    /* Main bubble floating animation (after separation) */
    @keyframes float-main-after {
      0% {
        transform: translate(-50%, -50%) scale(0.9);
      }
      25% {
        transform: translate(-51%, -52%) scale(0.9) translateY(-7px);
      }
      50% {
        transform: translate(-50%, -48%) scale(0.9) translateY(-12px);
      }
      75% {
        transform: translate(-49%, -52%) scale(0.9) translateY(-7px);
      }
      100% {
        transform: translate(-50%, -50%) scale(0.9);
      }
    }
    
    /* Main bubble deformation animation for separation */
    @keyframes mainBubbleDeform {
      0% {
        transform: translate(-50%, -50%) scale(1);
        border-radius: 51% 49% 48% 52% / 52% 47% 53% 48%;
      }
      5% {
        transform: translate(-51%, -50%) scale(1.01, 0.995);
        border-radius: 52% 48% 47% 53% / 50% 50% 53% 47%;
      }
      10% {
        transform: translate(-52%, -50%) scale(1.02, 0.99);
        border-radius: 53% 47% 46% 54% / 50% 49% 54% 46%;
      }
      15% {
        transform: translate(-52.5%, -50%) scale(1.03, 0.98);
        border-radius: 52% 48% 45% 55% / 49% 47% 56% 45%;
      }
      20% {
        transform: translate(-53%, -50%) scale(1.035, 0.975);
        border-radius: 50% 50% 43% 57% / 47% 45% 58% 44%;
      }
      25% {
        transform: translate(-54%, -50%) scale(1.04, 0.97);
        border-radius: 47% 53% 41% 59% / 45% 43% 60% 42%;
      }
      30% {
        transform: translate(-55%, -50%) scale(1.05, 0.965);
        border-radius: 44% 56% 40% 60% / 43% 41% 62% 40%;
      }
      35% {
        transform: translate(-56%, -50%) scale(1.055, 0.96);
        border-radius: 40% 60% 38% 62% / 40% 39% 64% 38%;
      }
      40% {
        transform: translate(-57%, -50%) scale(1.06, 0.955);
        border-radius: 37% 63% 36% 64% / 38% 36% 66% 36%;
      }
      45% {
        transform: translate(-58%, -50%) scale(1.065, 0.95);
        border-radius: 34% 66% 33% 67% / 35% 33% 68% 34%;
      }
      50% {
        transform: translate(-59%, -50%) scale(1.07, 0.945);
        border-radius: 32% 68% 31% 69% / 33% 30% 70% 32%;
      }
      53% {
        transform: translate(-58%, -50%) scale(1.03, 0.97);
        border-radius: 36% 64% 38% 62% / 39% 37% 63% 38%;
      }
      56% {
        transform: translate(-57%, -50%) scale(0.99, 0.99);
        border-radius: 40% 60% 43% 57% / 44% 42% 58% 43%;
      }
      59% {
        transform: translate(-56.5%, -50%) scale(0.97, 1.0);
        border-radius: 42% 58% 45% 55% / 46% 44% 56% 45%;
      }
      62% {
        transform: translate(-56%, -50%) scale(0.96, 1.01);
        border-radius: 44% 56% 47% 53% / 48% 46% 54% 47%;
      }
      65% {
        transform: translate(-55.5%, -50%) scale(0.95, 1.015);
        border-radius: 46% 54% 48% 52% / 49% 48% 52% 48%;
      }
      68% {
        transform: translate(-55%, -50%) scale(0.94, 1.02);
        border-radius: 47% 53% 49% 51% / 50% 49% 51% 50%;
      }
      71% {
        transform: translate(-54.5%, -50%) scale(0.935, 1.022);
        border-radius: 48% 52% 50% 50% / 50.5% 50.5% 49.5% 49.5%;
      }
      74% {
        transform: translate(-54%, -50%) scale(0.93, 1.025);
        border-radius: 49% 51% 50% 50% / 51% 52% 48% 49%;
      }
      77% {
        transform: translate(-53.5%, -50%) scale(0.925, 1.022);
        border-radius: 49.5% 50.5% 50.5% 49.5% / 51.5% 52.5% 47.5% 48.5%;
      }
      80% {
        transform: translate(-53%, -50%) scale(0.92, 1.02);
        border-radius: 50% 50% 51% 49% / 52% 53% 47% 48%;
      }
      83% {
        transform: translate(-52.5%, -50%) scale(0.915, 1.015);
        border-radius: 50.5% 49.5% 51.5% 48.5% / 52.2% 53.2% 46.8% 47.8%;
      }
      86% {
        transform: translate(-52%, -50%) scale(0.91, 1.01);
        border-radius: 51% 49% 52% 48% / 52.5% 53.5% 46.5% 47.5%;
      }
      89% {
        transform: translate(-51.5%, -50%) scale(0.905, 1.005);
        border-radius: 51.2% 48.8% 52.2% 47.8% / 52.2% 53.2% 46.8% 47.8%;
      }
      92% {
        transform: translate(-51%, -50%) scale(0.902, 1.002);
        border-radius: 51.5% 48.5% 52.5% 47.5% / 51.5% 52.5% 47.5% 48.5%;
      }
      96% {
        transform: translate(-50.5%, -50%) scale(0.901, 1.0);
        border-radius: 51.2% 48.8% 52.2% 47.8% / 51% 51.5% 48.5% 49%;
      }
      100% {
        transform: translate(-50%, -50%) scale(0.9);
        border-radius: 51% 49% 52% 48% / 50% 51% 49% 50%;
      }
    }
    
    /* New bubble formation animation */
    @keyframes newBubbleForm {
      0% {
        opacity: 0;
        transform: translate(-150%, -50%) scale(0.05);
        border-radius: 60% 40% 55% 45% / 55% 45% 55% 45%;
      }
      5% {
        opacity: 0.05;
        transform: translate(-145%, -50%) scale(0.1);
        border-radius: 59% 41% 55.5% 44.5% / 54.5% 45.5% 54% 46%;
      }
      10% {
        opacity: 0.1;
        transform: translate(-140%, -50%) scale(0.15);
        border-radius: 58% 42% 56% 44% / 54% 46% 53% 47%;
      }
      15% {
        opacity: 0.15;
        transform: translate(-135%, -50%) scale(0.2);
        border-radius: 57.5% 42.5% 55% 45% / 53.5% 46.5% 52.5% 47.5%;
      }
      20% {
        opacity: 0.2;
        transform: translate(-130%, -50%) scale(0.25);
        border-radius: 57% 43% 54% 46% / 53% 47% 52% 48%;
      }
      25% {
        opacity: 0.27;
        transform: translate(-125%, -50%) scale(0.3);
        border-radius: 56.5% 43.5% 53.5% 46.5% / 52.5% 47.5% 51.5% 48.5%;
      }
      30% {
        opacity: 0.35;
        transform: translate(-120%, -50%) scale(0.35);
        border-radius: 56% 44% 53% 47% / 52% 48% 51% 49%;
      }
      35% {
        opacity: 0.4;
        transform: translate(-115%, -50%) scale(0.4);
        border-radius: 55.5% 44.5% 52.5% 47.5% / 51.5% 48.5% 50.5% 49.5%;
      }
      40% {
        opacity: 0.45;
        transform: translate(-110%, -50%) scale(0.45);
        border-radius: 55% 45% 52% 48% / 51% 49% 50% 50%;
      }
      45% {
        opacity: 0.52;
        transform: translate(-105%, -50%) scale(0.5, 0.55);
        border-radius: 54.5% 45.5% 51.5% 48.5% / 50% 50% 49.5% 50.5%;
      }
      50% {
        opacity: 0.6;
        transform: translate(-100%, -50%) scale(0.55, 0.6);
        border-radius: 54% 46% 51% 49% / 49% 51% 49% 51%;
      }
      55% {
        opacity: 0.68;
        transform: translate(-95%, -50%) scale(0.65, 0.62);
        border-radius: 51% 49% 53% 47% / 47% 53% 48% 52%;
      }
      60% {
        opacity: 0.75;
        transform: translate(-90%, -50%) scale(0.72, 0.68);
        border-radius: 49% 51% 54% 46% / 46% 54% 47% 53%;
      }
      65% {
        opacity: 0.82;
        transform: translate(-85%, -50%) scale(0.78, 0.75);
        border-radius: 47% 53% 52% 48% / 48% 52% 47% 53%;
      }
      70% {
        opacity: 0.85;
        transform: translate(-80%, -50%) scale(0.82, 0.83);
        border-radius: 48% 52% 50% 50% / 50% 50% 48% 52%;
      }
      75% {
        opacity: 0.88;
        transform: translate(-75%, -50%) scale(0.85, 0.9);
        border-radius: 50% 50% 48% 52% / 52% 48% 50% 50%;
      }
      80% {
        opacity: 0.92;
        transform: translate(-70%, -50%) scale(0.9, 0.87);
        border-radius: 52% 48% 49% 51% / 51% 49% 52% 48%;
      }
      85% {
        opacity: 0.95;
        transform: translate(-65%, -50%) scale(0.94, 0.97);
        border-radius: 53% 47% 50% 50% / 49% 51% 51% 49%;
      }
      90% {
        opacity: 0.97;
        transform: translate(-60%, -50%) scale(0.97, 0.96);
        border-radius: 53% 47% 51% 49% / 48% 52% 50% 50%;
      }
      95% {
        opacity: 0.99;
        transform: translate(-55%, -50%) scale(0.99, 1.01);
        border-radius: 53% 47% 51.5% 48.5% / 48.5% 51.5% 49.5% 50.5%;
      }
      100% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
        border-radius: 53% 47% 52% 48% / 49% 51% 50% 50%;
      }
    }
    
    /* Bubble connector animation */
    @keyframes connectorAnimation {
      0% {
        opacity: 0;
        width: 0;
        height: 0;
        transform: scaleX(0) translateX(0);
        border-radius: 50%;
      }
      /* Initial formation stages */
      5% {
        opacity: 0.2;
        width: 10px;
        height: 8px;
        transform: scaleX(0.1) translateX(5px);
        border-radius: 48% 52% 48% 52% / 50% 50% 50% 50%;
      }
      10% {
        opacity: 0.3;
        width: 15px;
        height: 12px;
        transform: scaleX(0.15) translateX(10px);
        border-radius: 47% 53% 47% 53% / 50% 50% 50% 50%;
      }
      15% {
        opacity: 0.4;
        width: 20px;
        height: 15px;
        transform: scaleX(0.2) translateX(15px);
        border-radius: 45% 55% 45% 55% / 50% 50% 50% 50%;
      }
      /* Growth phase - elongation */
      20% {
        opacity: 0.5;
        width: 25px;
        height: 18px;
        transform: scaleX(0.27) translateX(18px);
        border-radius: 44% 56% 44% 56% / 49% 51% 49% 51%;
      }
      25% {
        opacity: 0.55;
        width: 30px;
        height: 20px;
        transform: scaleX(0.35) translateX(22px);
        border-radius: 42% 58% 42% 58% / 48% 52% 48% 52%;
      }
      30% {
        opacity: 0.65;
        width: 35px;
        height: 22px;
        transform: scaleX(0.42) translateX(26px);
        border-radius: 41% 59% 41% 59% / 47% 53% 47% 53%;
      }
      35% {
        opacity: 0.75;
        width: 38px;
        height: 24px;
        transform: scaleX(0.48) translateX(30px);
        border-radius: 40% 60% 40% 60% / 46% 54% 46% 54%;
      }
      /* Maximum extension point */
      40% {
        opacity: 0.85;
        width: 42px;
        height: 26px;
        transform: scaleX(0.55) translateX(33px);
        border-radius: 39% 61% 39% 61% / 44% 56% 44% 56%;
      }
      45% {
        opacity: 0.95;
        width: 46px;
        height: 28px;
        transform: scaleX(0.62) translateX(36px);
        border-radius: 37% 63% 37% 63% / 42% 58% 42% 58%;
      }
      50% {
        opacity: 1;
        width: 50px;
        height: 30px;
        transform: scaleX(0.7) translateX(40px);
        border-radius: 35% 65% 35% 65% / 40% 60% 40% 60%;
      }
      /* Thinning phase - begins to narrow in middle */
      53% {
        opacity: 0.97;
        width: 48px;
        height: 28px;
        transform: scaleX(0.67) translateX(43px);
        border-radius: 36% 64% 36% 64% / 41% 59% 41% 59%;
      }
      56% {
        opacity: 0.94;
        width: 45px;
        height: 27px;
        transform: scaleX(0.64) translateX(46px);
        border-radius: 37% 63% 37% 63% / 42% 58% 42% 58%;
      }
      59% {
        opacity: 0.9;
        width: 42px;
        height: 25px;
        transform: scaleX(0.61) translateX(49px);
        border-radius: 38% 62% 38% 62% / 43% 57% 43% 57%;
      }
      62% {
        opacity: 0.87;
        width: 39px;
        height: 24px;
        transform: scaleX(0.58) translateX(52px);
        border-radius: 39% 61% 39% 61% / 44% 56% 44% 56%;
      }
      /* More pronounced necking */
      65% {
        opacity: 0.85;
        width: 36px;
        height: 22px;
        transform: scaleX(0.55) translateX(55px);
        border-radius: 39% 61% 39% 61% / 44% 56% 44% 56%;
      }
      68% {
        opacity: 0.8;
        width: 33px;
        height: 21px;
        transform: scaleX(0.52) translateX(58px);
        border-radius: 40% 60% 40% 60% / 45% 55% 45% 55%;
      }
      71% {
        opacity: 0.75;
        width: 30px;
        height: 20px;
        transform: scaleX(0.5) translateX(61px);
        border-radius: 40% 60% 40% 60% / 45% 55% 45% 55%;
      }
      /* Critical thinning before break */
      74% {
        opacity: 0.7;
        width: 27px;
        height: 18px;
        transform: scaleX(0.47) translateX(64px);
        border-radius: 41% 59% 41% 59% / 46% 54% 46% 54%;
      }
      77% {
        opacity: 0.65;
        width: 24px;
        height: 16px;
        transform: scaleX(0.45) translateX(67px);
        border-radius: 42% 58% 42% 58% / 47% 53% 47% 53%;
      }
      /* Breaking - connector is about to separate */
      80% {
        opacity: 0.55;
        width: 20px;
        height: 14px;
        transform: scaleX(0.4) translateX(70px);
        border-radius: 43% 57% 43% 57% / 48% 52% 48% 52%;
      }
      83% {
        opacity: 0.45;
        width: 16px;
        height: 12px;
        transform: scaleX(0.35) translateX(73px);
        border-radius: 44% 56% 44% 56% / 48% 52% 48% 52%;
      }
      86% {
        opacity: 0.35;
        width: 14px;
        height: 10px;
        transform: scaleX(0.25) translateX(76px);
        border-radius: 45% 55% 45% 55% / 49% 51% 49% 51%;
      }
      /* Post-break dissipation */
      89% {
        opacity: 0.25;
        width: 12px;
        height: 9px;
        transform: scaleX(0.2) translateX(82px);
        border-radius: 47% 53% 47% 53% / 49% 51% 49% 51%;
      }
      92% {
        opacity: 0.2;
        width: 10px;
        height: 8px;
        transform: scaleX(0.15) translateX(88px);
        border-radius: 48% 52% 48% 52% / 49% 51% 49% 51%;
      }
      95% {
        opacity: 0.1;
        width: 5px;
        height: 4px;
        transform: scaleX(0.1) translateX(94px);
        border-radius: 49% 51% 49% 51% / 50% 50% 50% 50%;
      }
      100% {
        opacity: 0;
        width: 0;
        height: 0;
        transform: scaleX(0) translateX(100px);
        border-radius: 50%;
      }
    }
    
    /* Tiny bubble rise animation */
    @keyframes tinyBubbleRise {
      0% {
        opacity: 0;
        transform: translate(0, 0) scale(0);
      }
      10% {
        opacity: 1;
        transform: translate(calc(var(--tx) * 0.1), calc(var(--ty) * 0.1)) scale(1);
      }
      25% {
        opacity: 0.95;
        transform: translate(calc(var(--tx) * 0.3), calc(var(--ty) * 0.3)) scale(0.95) rotate(calc(var(--tr) * 0.2));
      }
      40% {
        opacity: 0.9;
        transform: translate(calc(var(--tx) * 0.45 + var(--wobble-x)), calc(var(--ty) * 0.45)) scale(0.9) rotate(calc(var(--tr) * 0.4));
      }
      60% {
        opacity: 0.8;
        transform: translate(calc(var(--tx) * 0.6 - var(--wobble-x)), calc(var(--ty) * 0.6)) scale(0.85) rotate(calc(var(--tr) * 0.6));
      }
      80% {
        opacity: 0.6;
        transform: translate(calc(var(--tx) * 0.75 + var(--wobble-x)), calc(var(--ty) * 0.75)) scale(0.75) rotate(calc(var(--tr) * 0.8));
      }
      100% {
        opacity: 0;
        transform: translate(var(--tx), var(--ty)) scale(0.7) rotate(var(--tr));
      }
    }
    
    /* Reduced motion preferences */
    @media (prefers-reduced-motion: reduce) {
      * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }
  </style>
</head>
<body>
  <!-- Theme Toggle Button -->
  <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
    <i class="fas fa-moon" id="themeIcon"></i>
  </button>

  <!-- Background Gradient -->
  <div class="bg-gradient"></div>

  <!-- Background Particles -->
  <div class="particles-container" id="particlesContainer"></div>

  <!-- Main Bubble Container -->
  <div class="bubble-container" id="bubbleContainer">
    <!-- Main Bubble -->
    <div class="bubble main-bubble" id="mainBubble">
      <div class="highlight highlight-main"></div>
      <div class="highlight highlight-small"></div>
      <div class="spinner"></div>
    </div>
    
    <!-- Redirect Bubble -->
    <div class="bubble redirect-bubble" id="redirectBubble">
      <div class="highlight highlight-main"></div>
      <div class="highlight highlight-small"></div>
      <div class="arrow"></div>
    </div>
    
    <!-- Bubble Connector -->
    <div class="bubble-connector" id="bubbleConnector"></div>
  </div>

  <!-- Loading Text -->
  <div class="loading-text" id="loadingText">
    Przekierowywanie...
  </div>

  <!-- Font Awesome -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Configuration
      const redirectUrl = "https://guziczak.github.io/lukasz/";
      const autoRedirectDelay = 1;  // ms before auto-redirect
      const splitStartDelay = 1;    // ms before bubble split animation starts
      const splitDuration = 2000;     // ms for the split animation
      
      // Get DOM elements
      const body = document.body;
      const bubbleContainer = document.getElementById('bubbleContainer');
      const mainBubble = document.getElementById('mainBubble');
      const redirectBubble = document.getElementById('redirectBubble');
      const bubbleConnector = document.getElementById('bubbleConnector');
      const themeToggle = document.getElementById('themeToggle');
      const themeIcon = document.getElementById('themeIcon');
      const loadingText = document.getElementById('loadingText');
      const particlesContainer = document.getElementById('particlesContainer');
      
      // Initialize theme based on user preference
      initTheme();
      
      // Create background particles
      createBackgroundParticles();
      
      // Redirect on click
      redirectBubble.addEventListener('click', () => {
        window.location.href = redirectUrl;
      });
      
      // Toggle theme
      themeToggle.addEventListener('click', toggleDarkMode);
      
      // Schedule the bubble split animation
      setTimeout(startBubbleSeparationAnimation, splitStartDelay);
      
      // Schedule auto-redirect
      setTimeout(() => {
        // Fade out loading text before redirect
        if (loadingText) loadingText.classList.add('fade-out');
        
        setTimeout(() => {
          window.location.href = redirectUrl;
        }, 500);
      }, autoRedirectDelay);
      
      // Theme initialization function
      function initTheme() {
        const prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const savedTheme = localStorage.getItem('darkMode');
        
        if (savedTheme === 'true' || (savedTheme === null && prefersDarkMode)) {
          body.classList.add('dark-mode');
          themeIcon.classList.remove('fa-moon');
          themeIcon.classList.add('fa-sun');
        }
      }
      
      // Toggle dark mode function
      function toggleDarkMode() {
        const isDark = body.classList.toggle('dark-mode');
        localStorage.setItem('darkMode', isDark);
        
        if (isDark) {
          themeIcon.classList.remove('fa-moon');
          themeIcon.classList.add('fa-sun');
        } else {
          themeIcon.classList.remove('fa-sun');
          themeIcon.classList.add('fa-moon');
        }
      }
      
      // Create floating background particles
      function createBackgroundParticles() {
        if (!particlesContainer) return;
        
        for (let i = 0; i < 20; i++) {
          const particle = document.createElement('div');
          particle.className = 'particle';
          
          // Random size between 3px and 12px
          const size = 3 + Math.random() * 9;
          particle.style.width = `${size}px`;
          particle.style.height = `${size}px`;
          
          // Random position
          const left = Math.random() * 100;
          const top = Math.random() * 100;
          particle.style.left = `${left}%`;
          particle.style.top = `${top}%`;
          
          // Random animation properties
          particle.style.setProperty('--x-offset', `${Math.random() * 100 - 50}px`);
          particle.style.setProperty('--y-offset', `${Math.random() * 100 - 50}px`);
          
          // Random animation delay
          particle.style.animationDelay = `${Math.random() * 5}s`;
          
          particlesContainer.appendChild(particle);
        }
      }
      
      // Main bubble separation animation
      function startBubbleSeparationAnimation() {
        // Set up bubble connector
        const mainRect = mainBubble.getBoundingClientRect();
        const containerRect = bubbleContainer.getBoundingClientRect();
        
        const mainCenterX = mainRect.left - containerRect.left + mainRect.width / 2;
        const mainCenterY = mainRect.top - containerRect.top + mainRect.height / 2;
        
        bubbleConnector.style.left = `${mainCenterX}px`;
        bubbleConnector.style.top = `${mainCenterY}px`;
        
        setTimeout(() => {
          // Start the main bubble deformation and new bubble formation animations
          mainBubble.style.animation = `mainBubbleDeform ${splitDuration}ms forwards cubic-bezier(0.34, 1.56, 0.64, 1)`;
          redirectBubble.style.animation = `newBubbleForm ${splitDuration}ms forwards cubic-bezier(0.34, 1.56, 0.64, 1)`;
          bubbleConnector.style.animation = `connectorAnimation ${splitDuration}ms forwards cubic-bezier(0.34, 1.56, 0.64, 1)`;
          
          // Create tiny bubbles at the precise moment of separation
          setTimeout(() => {
            createTinyBubbleEffect();
          }, splitDuration * 0.48); // Create bubbles at exact separation moment
          
          // After separation is complete
          setTimeout(() => {
            // Use classes instead of inline styles to ensure bubble remains visible
            mainBubble.classList.add('main-floating');
            redirectBubble.classList.add('redirect-floating');
            
            // Update loading text
            if (loadingText) {
              loadingText.textContent = 'Kliknij bąbelek, aby przejść dalej';
              loadingText.classList.add('pulse');
            }
            
            // Add post-separation effects
            addPostSeparationEffects();
          }, splitDuration + 100);
        }, 300);
      }
      
      // Add subtle post-separation visual effects
      function addPostSeparationEffects() {
        // Add small floating particles from the separation point
        for (let i = 0; i < 5; i++) {
          setTimeout(() => {
            const particle = document.createElement('div');
            particle.className = 'particle';
            
            // Small particles
            const size = 2 + Math.random() * 3;
            particle.style.width = `${size}px`;
            particle.style.height = `${size}px`;
            
            // Position near separation point
            const mainRect = mainBubble.getBoundingClientRect();
            const redirectRect = redirectBubble.getBoundingClientRect();
            const containerRect = bubbleContainer.getBoundingClientRect();
            
            const mainCenterX = mainRect.left - containerRect.left + mainRect.width / 2;
            const mainCenterY = mainRect.top - containerRect.top + mainRect.height / 2;
            const redirectCenterX = redirectRect.left - containerRect.left + redirectRect.width / 2;
            const redirectCenterY = redirectRect.top - containerRect.top + redirectRect.height / 2;
            
            const midX = (mainCenterX + redirectCenterX) / 2;
            const midY = (mainCenterY + redirectCenterY) / 2;
            
            particle.style.left = `${midX}px`;
            particle.style.top = `${midY}px`;
            
            // Random animation properties
            particle.style.setProperty('--x-offset', `${Math.random() * 40 - 20}px`);
            particle.style.setProperty('--y-offset', `${-30 - Math.random() * 30}px`);
            
            // Add to container
            bubbleContainer.appendChild(particle);
            
            // Remove after animation
            setTimeout(() => {
              particle.remove();
            }, 10000);
          }, i * 500);
        }
      }
      
      // Create tiny bubble effect during separation
      function createTinyBubbleEffect() {
        const mainRect = mainBubble.getBoundingClientRect();
        const redirectRect = redirectBubble.getBoundingClientRect();
        const containerRect = bubbleContainer.getBoundingClientRect();
        
        // Calculate the break point between the two bubbles
        const mainCenterX = mainRect.left - containerRect.left + mainRect.width / 2;
        const mainCenterY = mainRect.top - containerRect.top + mainRect.height / 2;
        const redirectCenterX = redirectRect.left - containerRect.left + redirectRect.width / 2;
        const redirectCenterY = redirectRect.top - containerRect.top + redirectRect.height / 2;
        
        // The exact point where bubbles are separating
        const breakPointX = mainCenterX + (redirectCenterX - mainCenterX) * 0.4;
        const breakPointY = mainCenterY + (redirectCenterY - mainCenterY) * 0.4;
        
        // Vector for break direction
        const breakAngle = Math.atan2(redirectCenterY - mainCenterY, redirectCenterX - mainCenterX);
        
        // Create two waves of tiny bubbles
        const numFirstWave = 8 + Math.floor(Math.random() * 5);
        const numSecondWave = 7 + Math.floor(Math.random() * 6);
        
        // First wave - immediate break bubbles
        createBubbleWave(numFirstWave, breakPointX, breakPointY, breakAngle, 0);
        
        // Second wave - slightly delayed bubbles
        setTimeout(() => {
          createBubbleWave(numSecondWave, breakPointX, breakPointY, breakAngle, 0.7);
        }, 100);
        
        function createBubbleWave(numBubbles, originX, originY, angle, waveOffsetFactor) {
          for (let i = 0; i < numBubbles; i++) {
            const tinyBubble = document.createElement('div');
            tinyBubble.className = 'tiny-bubble';
            
            // Add highlights to tiny bubbles
            const highlight = document.createElement('div');
            highlight.className = 'highlight highlight-small';
            highlight.style.width = '40%';
            highlight.style.height = '40%';
            highlight.style.top = '20%';
            highlight.style.left = '20%';
            tinyBubble.appendChild(highlight);
            
            // More varied size distribution 
            const sizeRandom = Math.random();
            let size;
            
            if (sizeRandom < 0.6) { // 60% chance of tiny bubbles
              size = 2 + sizeRandom * 3; // 2-5px
            } else if (sizeRandom < 0.9) { // 30% chance of medium bubbles
              size = 5 + (sizeRandom - 0.6) * 10 / 0.3; // 5-10px
            } else { // 10% chance of larger bubbles
              size = 10 + (sizeRandom - 0.9) * 5 / 0.1; // 10-15px
            }
            
            tinyBubble.style.width = `${size}px`;
            tinyBubble.style.height = `${size}px`;
            
            // Initial position with radial distribution
            const radialDistance = Math.random() * 12 * (1 + waveOffsetFactor);
            const radialAngle = angle + (Math.random() - 0.5) * Math.PI; // Dispersal cone
            
            const offsetX = Math.cos(radialAngle) * radialDistance;
            const offsetY = Math.sin(radialAngle) * radialDistance;
            
            tinyBubble.style.left = `${originX + offsetX}px`;
            tinyBubble.style.top = `${originY + offsetY}px`;
            
            // Physics-based direction vectors
            const dispersalFactor = 1 - (size / 15); // Smaller bubbles disperse more randomly
            const primaryDirection = Math.PI / 2; // Upward direction
            
            // Blend between break direction and upward direction based on size
            const blendedAngle = angle * dispersalFactor + primaryDirection * (1 - dispersalFactor);
            
            // Add randomness proportional to size
            const finalAngle = blendedAngle + (Math.random() - 0.5) * Math.PI * dispersalFactor;
            
            // Distance proportional to size
            const baseDistance = 30 + size * 3;
            const distance = baseDistance + Math.random() * 40;
            
            // Larger bubbles rise faster due to buoyancy
            const speedFactor = 0.6 + (size / 10);
            
            // Calculate final movement vectors
            const tx = Math.sin(finalAngle) * distance * speedFactor;
            const ty = -Math.abs(Math.cos(finalAngle) * distance * speedFactor); // Always rise up
            
            // More rotation for smaller bubbles
            const tr = (Math.random() - 0.5) * (120 - size * 5); 
            
            // Path wobble for realistic fluid dynamics
            const wobbleX = Math.random() * 10 * (1 - size/15); // Smaller bubbles wobble more
            
            // Set CSS variables for animation
            tinyBubble.style.setProperty('--tx', `${tx}px`);
            tinyBubble.style.setProperty('--ty', `${ty}px`);
            tinyBubble.style.setProperty('--tr', `${tr}deg`);
            tinyBubble.style.setProperty('--wobble-x', `${wobbleX}px`);
            
            // Add to container
            bubbleContainer.appendChild(tinyBubble);
            
            // Staggered animation start times for more natural effect
            const startDelay = i * 15 + Math.random() * 30;
            
            // Varied animation duration based on size
            const duration = 0.7 + size/10 + Math.random() * 0.5;
            
            // Start animation
            setTimeout(() => {
              tinyBubble.style.animation = `tinyBubbleRise ${duration}s ease-out forwards`;
              
              // Remove after animation completes
              setTimeout(() => {
                tinyBubble.remove();
              }, duration * 1000 + 100);
            }, startDelay);
          }
        }
      }
    });
  </script>
</body>
</html>