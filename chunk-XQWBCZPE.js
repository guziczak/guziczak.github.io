import{f as k}from"./chunk-6NCQ3U63.js";import{B as w,Mb as m,Nb as c,Ob as l,U as D,Y as a,a as d,b as f,ba as g,d as h,ka as I,l as b,ma as T,pa as r,s as y}from"./chunk-KSOQK5D3.js";var M=class i{http=g(k);language=r("en");translations=r({});isLoading=r(!1);cache=new Map;currentLanguage=this.language.asReadonly();loading=this.isLoading.asReadonly();ready=c(()=>!this.isLoading()&&Object.keys(this.translations()).length>0);isDarkMode$=this.currentLanguage;constructor(){let e=localStorage.getItem("language"),t=navigator.language.substring(0,2),n=["en","pl","de"],o="en";e&&n.includes(e)?o=e:n.includes(t)&&(o=t),this.language.set(o),document.documentElement.setAttribute("lang",o),this.loadTranslations(o);let s=!0;l(()=>{let u=this.language();if(s){s=!1;return}localStorage.setItem("language",u),document.documentElement.setAttribute("lang",u),this.loadTranslations(u)})}t(e,t){if(this.isLoading()||Object.keys(this.translations()).length===0)return e;let n=this.getNestedTranslation(e);if(!n){let o=e.replace(/\./g,"_"),s=this.translations()[o];return s||(console.warn(`Missing translation: ${e}`),e)}return t&&typeof n=="string"?this.interpolate(n,t):n}getNestedTranslation(e){let t=e.split("."),n=this.translations();for(let o of t)if(n&&typeof n=="object"&&o in n)n=n[o];else return null;return n}interpolate(e,t){return e.replace(/\{\{(\w+)\}\}/g,(n,o)=>t[o]!==void 0?String(t[o]):n)}loadTranslations(e){return h(this,null,function*(){if(this.cache.has(e)){this.translations.set(this.cache.get(e));return}this.isLoading.set(!0);try{let t=yield y(this.http.get(`/assets/i18n/${e}.json`));this.cache.set(e,t),this.translations.set(t)}catch{console.warn(`Failed to load translations from assets/i18n/${e}.json, using embedded fallback`);let n=this.getEmbeddedTranslations(e);this.cache.set(e,n),this.translations.set(n)}finally{this.isLoading.set(!1)}})}toggleLanguage(){return h(this,null,function*(){let e=this.language(),t;switch(e){case"en":t="pl";break;case"pl":t="de";break;case"de":t="en";break;default:t="en"}this.cache.has(t)||(yield this.loadTranslations(t)),this.language.set(t),localStorage.setItem("language",t)})}setLanguage(e){this.language.set(e)}getAllTranslations(e){return this.cache.get(e)||{}}addTranslations(e,t){let n=this.cache.get(e)||{},o=d(d({},n),t);this.cache.set(e,o),this.language()===e&&this.translations.set(o)}createLanguageEffect(e){let t=l(()=>{this.currentLanguage(),e()});return()=>t.destroy()}getEmbeddedTranslations(e){return console.warn(`Using empty fallback translations for language: ${e}. Ensure /assets/i18n/${e}.json is accessible.`),{}}static \u0275fac=function(t){return new(t||i)};static \u0275prov=a({token:i,factory:i.\u0275fac,providedIn:"root"})};var L=class i{scrollPosition=r(0);activeSection=r("home");currentScrollPosition=this.scrollPosition.asReadonly();currentSection=this.activeSection.asReadonly();sections=["home","about","skills","projects","achievements","games","testimonials","contact"];constructor(){typeof window<"u"&&w(window,"scroll").pipe(D(100)).subscribe(()=>{this.updateScrollPosition(),this.updateActiveSection()})}updateScrollPosition(){this.scrollPosition.set(window.scrollY)}updateActiveSection(){let e=window.scrollY,t=window.innerHeight,n=200;for(let o of this.sections){let s=document.getElementById(o);if(s){let v=s.getBoundingClientRect().top+e,j=v+s.offsetHeight;if(e+n>=v&&e<j){this.activeSection.set(o);break}}}e<100&&this.activeSection.set("home")}scrollToSection(e){let t=document.getElementById(e);if(t){let o=t.offsetTop-80;this.activeSection.set(e),window.scrollTo({top:o,behavior:"smooth"}),setTimeout(()=>{this.updateActiveSection()},500)}}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=a({token:i,factory:i.\u0275fac,providedIn:"root"})};var S=class i{notifications=r([]);activeNotifications=this.notifications.asReadonly();hasNotifications=c(()=>this.notifications().length>0);CONFIG={DEFAULT_DURATION_MS:5e3,ERROR_DURATION_MS:8e3,ID_RANDOM_LENGTH:9};show(e){let t=this.generateId(),n=f(d({},e),{id:t,duration:e.duration??this.CONFIG.DEFAULT_DURATION_MS});return this.notifications.update(o=>[...o,n]),n.duration&&n.duration>0&&setTimeout(()=>{this.dismiss(t)},n.duration),t}success(e,t){return this.show({type:"success",message:e,duration:t})}error(e,t){return this.show({type:"error",message:e,duration:t??this.CONFIG.ERROR_DURATION_MS})}warning(e,t){return this.show({type:"warning",message:e,duration:t})}info(e,t){return this.show({type:"info",message:e,duration:t})}dismiss(e){this.notifications.update(t=>t.filter(n=>n.id!==e))}dismissAll(){this.notifications.set([])}generateId(){return`notification-${Date.now()}-${Math.random().toString(36).substr(2,this.CONFIG.ID_RANDOM_LENGTH)}`}static \u0275fac=function(t){return new(t||i)};static \u0275prov=a({token:i,factory:i.\u0275fac,providedIn:"root"})};function N(i,e){let t=e?.injector??g(I),n=new b(1),o=l(()=>{let s;try{s=i()}catch(u){m(()=>n.error(u));return}m(()=>n.next(s))},{injector:t,manualCleanup:!0});return t.get(T).onDestroy(()=>{o.destroy(),n.complete()}),n.asObservable()}var R=class i{theme=r("light");isDarkMode=c(()=>this.theme()==="dark");isDarkMode$=N(this.isDarkMode);constructor(){let e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;this.theme.set(e||(t?"dark":"light")),l(()=>{let n=this.theme();document.documentElement.setAttribute("data-theme",n),localStorage.setItem("theme",n);let o=document.querySelector("meta[name=theme-color]");o&&o.setAttribute("content",n==="dark"?"#111827":"#ffffff")}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",n=>{localStorage.getItem("theme")||this.theme.set(n.matches?"dark":"light")})}toggleTheme(){this.theme.update(e=>e==="light"?"dark":"light")}setTheme(e){this.theme.set(e)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=a({token:i,factory:i.\u0275fac,providedIn:"root"})};export{M as a,L as b,S as c,R as d};
